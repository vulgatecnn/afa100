# 阶段 1: 关键错误修复计划

## 策略调整说明

原计划一次性修复 589 个错误过于庞大，现在采用分阶段渐进式修复：

### 🎯 阶段 1 目标：让 CI/CD 基本可用 (修复约 50 个关键错误)

#### 1.1 修复核心类型导出问题 (5 分钟)

- ✅ 添加 `DatabaseType` 枚举
- ✅ 添加 `CreateAccessRecordData` 类型
- ✅ 添加 `RealtimeStatus` 类型
- ✅ 扩展 `ResourceType` 包含 'merchant'

#### 1.2 修复最严重的模型类型错误 (10 分钟)

- ✅ 修复 `VisitorApplication` 缺失字段问题

- [ ] 修复 `Venue` 模型字段问题

- ✅ 修复 `User` 和 `Merchant` 基础字段问题

#### 1.3 修复关键测试 Mock 类型 (10 分钟)

- [ ] 建立基础的 Vitest Mock 类型定义


- [ ] 修复 Axios Mock 类型问题

- [ ] 添加常用测试工具类型

#### 1.4 验证修复效果 (5 分钟)

- [ ] 运行类型检查，确认错误数量显著减少
- [ ] 测试 CI/CD 是否能通过基础检查

### 🎯 阶段 2 目标：完善测试类型 (后续)

- 修复剩余的测试 Mock 类型错误
- 统一测试数据结构

### 🎯 阶段 3 目标：优化和完善 (后续)

- 修复第三方库集成问题
- 优化工具函数类型
- 建立长期维护机制

## 当前进度

✅ 错误分析完成 - 589 个错误已分类  
🔄 正在执行阶段 1.1 - 核心类型修复  
⏳ 待执行阶段 1.2 - 模型类型修复

## 预期效果

阶段 1 完成后：

- 错误数量从 589 个减少到约 400-450 个
- CI/CD 基础检查能够通过
- 核心开发不再被类型错误阻碍
- 为后续修复建立良好基础
