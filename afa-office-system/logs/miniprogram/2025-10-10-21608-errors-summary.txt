微信小程序 测试失败摘要 (2025/10/10 20:30:11)
============================================================

失败测试数量: 17
提取到的错误详情: 34 个

1. tests/integration/visitor-flow.test.ts
   测试套件: Visitor Flow Integration Tests
   测试名称: Complete Visitor Application Flow > should handle usage limit exceeded
   错误信息: expected [Function] to throw error including '通行码使用次数已达上限，无法刷新' but got 'HTTP 400: [object Object]'
   错误类型: test_failure

2. tests/integration/visitor-flow.test.ts
   测试套件: Visitor Flow Integration Tests
   测试名称: Error Handling > should handle invalid application data
   错误信息: expected [Function] to throw error including '申请数据无效' but got 'HTTP 400: [object Object]'
   错误类型: test_failure

3. tests/integration/visitor-flow.test.ts
   测试套件: Visitor Flow Integration Tests
   测试名称: Data Validation > should validate scheduled time format
   错误信息: expected '2024-01-01T10:00:00.000Z' to be '2024-01-01T10:00:00Z' // Object.is equality
   错误类型: test_failure

4. tests/unit/services/visitor.test.ts
   测试套件: VisitorService
   测试名称: submitApplication > should validate required fields
   错误信息: expected [Function] to throw error including '访客姓名不能为空' but got 'HTTP 400: [object Object]'
   错误类型: test_failure

5. tests/unit/services/visitor.test.ts
   测试套件: VisitorService
   测试名称: refreshPasscode > should handle refresh failure
   错误信息: expected [Function] to throw error including '通行码刷新失败' but got 'HTTP 400: [object Object]'
   错误类型: test_failure

6. tests/unit/services/employee.test.ts
   测试套件: EmployeeService
   测试名称: submitApplication > should handle duplicate application
   错误信息: expected [Function] to throw error including '您已提交过申请，请勿重复提交' but got 'HTTP 400: [object Object]'
   错误类型: test_failure

7. tests/unit/services/employee.test.ts
   测试套件: EmployeeService
   测试名称: approveVisitorApplication > should handle approval failure
   错误信息: expected [Function] to throw error including '审批操作失败' but got 'HTTP 400: [object Object]'
   错误类型: test_failure

8. tests/e2e/complete-visitor-flow.test.ts
   测试套件: 访客预约完整流程端到端测试
   测试名称: 数据验证测试 > 应该验证访客申请数据格式
   错误信息: expected '2024-01-01T10:00:00.000Z' to be '2024-01-01T10:00:00Z' // Object.is equality
   错误类型: test_failure

9. tests/e2e/complete-visitor-flow.test.ts
   测试套件: 访客预约完整流程端到端测试
   测试名称: 数据验证测试 > 应该验证申请数据完整性
   错误信息: expected false to be true // Object.is equality
   错误类型: test_failure

10. tests/e2e/complete-visitor-flow.test.ts
   测试套件: 访客预约完整流程端到端测试
   测试名称: 通行码展示实时性测试 > 应该实时更新通行码状态
   错误信息: expected 'active' to be 'expired' // Object.is equality
   错误类型: test_failure

11. tests/integration/employee-flow.test.ts
   测试套件: Employee Flow Integration Tests
   测试名称: Passcode Management > should handle passcode refresh failure
   错误信息: expected [Function] to throw error including '服务器错误，无法刷新通行码' but got 'HTTP 500: [object Object]'
   错误类型: test_failure

12. tests/integration/employee-flow.test.ts
   测试套件: Employee Flow Integration Tests
   测试名称: Data Validation > should validate ID card format
   错误信息: expected true to be false // Object.is equality
   错误类型: test_failure

13. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 二维码生成准确性 > 应该根据通行码内容生成正确的二维码
   错误信息: expected "spy" to be called with arguments: [ +0, +0, 200, 200 ] | Received:
   错误类型: test_failure

14. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 二维码生成准确性 > 应该根据屏幕尺寸自适应二维码大小
   错误信息: expected 177 to be 200 // Object.is equality
   错误类型: test_failure

15. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 通行码状态实时更新 > 应该准确显示通行码的实时状态
   错误信息: expected '已过期' to be '剩余 3 次使用' // Object.is equality
   错误类型: test_failure

16. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 通行码状态实时更新 > 应该准确显示通行码的过期状态
   错误信息: expected true to be false // Object.is equality
   错误类型: test_failure

17. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 员工通行码自动刷新准确性 > 应该按照设定频率准确刷新员工通行码
   错误信息: Aborting after running 10000 timers, assuming an infinite loop!
   错误类型: test_failure

18. tests/e2e/complete-visitor-flow.test.ts
   测试套件: 访客预约完整流程端到端测试
   测试名称: 数据验证测试 > 应该验证访客申请数据格式
   错误信息: AssertionError: expected '2024-01-01T10:00:00.000Z' to be '2024-01-01T10:00:00Z' // Object.is equality
   错误类型: assertion

19. tests/e2e/complete-visitor-flow.test.ts
   测试套件: 访客预约完整流程端到端测试
   测试名称: 数据验证测试 > 应该验证申请数据完整性
   错误信息: AssertionError: expected false to be true // Object.is equality
   错误类型: assertion

20. tests/e2e/complete-visitor-flow.test.ts
   测试套件: 访客预约完整流程端到端测试
   测试名称: 通行码展示实时性测试 > 应该实时更新通行码状态
   错误信息: AssertionError: expected 'active' to be 'expired' // Object.is equality
   错误类型: assertion

21. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 二维码生成准确性 > 应该根据通行码内容生成正确的二维码
   错误信息: AssertionError: expected "spy" to be called with arguments: [ +0, +0, 200, 200 ] | Received:
   错误类型: assertion

22. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 二维码生成准确性 > 应该根据屏幕尺寸自适应二维码大小
   错误信息: AssertionError: expected 177 to be 200 // Object.is equality
   错误类型: assertion

23. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 通行码状态实时更新 > 应该准确显示通行码的实时状态
   错误信息: AssertionError: expected '已过期' to be '剩余 3 次使用' // Object.is equality
   错误类型: assertion

24. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 通行码状态实时更新 > 应该准确显示通行码的过期状态
   错误信息: AssertionError: expected true to be false // Object.is equality
   错误类型: assertion

25. tests/e2e/passcode-accuracy.test.ts
   测试套件: 通行码展示准确性测试
   测试名称: 员工通行码自动刷新准确性 > 应该按照设定频率准确刷新员工通行码
   错误信息: Error: Aborting after running 10000 timers, assuming an infinite loop!
   错误类型: error

26. tests/integration/employee-flow.test.ts
   测试套件: Employee Flow Integration Tests
   测试名称: Passcode Management > should handle passcode refresh failure
   错误信息: AssertionError: expected [Function] to throw error including '服务器错误，无法刷新通行码' but got 'HTTP 500: [object Object]'
   错误类型: assertion

27. tests/integration/employee-flow.test.ts
   测试套件: Employee Flow Integration Tests
   测试名称: Data Validation > should validate ID card format
   错误信息: AssertionError: expected true to be false // Object.is equality
   错误类型: assertion

28. tests/integration/visitor-flow.test.ts
   测试套件: Visitor Flow Integration Tests
   测试名称: Complete Visitor Application Flow > should handle usage limit exceeded
   错误信息: AssertionError: expected [Function] to throw error including '通行码使用次数已达上限，无法刷新' but got 'HTTP 400: [object Object]'
   错误类型: assertion

29. tests/integration/visitor-flow.test.ts
   测试套件: Visitor Flow Integration Tests
   测试名称: Error Handling > should handle invalid application data
   错误信息: AssertionError: expected [Function] to throw error including '申请数据无效' but got 'HTTP 400: [object Object]'
   错误类型: assertion

30. tests/integration/visitor-flow.test.ts
   测试套件: Visitor Flow Integration Tests
   测试名称: Data Validation > should validate scheduled time format
   错误信息: AssertionError: expected '2024-01-01T10:00:00.000Z' to be '2024-01-01T10:00:00Z' // Object.is equality
   错误类型: assertion

31. tests/unit/services/employee.test.ts
   测试套件: EmployeeService
   测试名称: submitApplication > should handle duplicate application
   错误信息: AssertionError: expected [Function] to throw error including '您已提交过申请，请勿重复提交' but got 'HTTP 400: [object Object]'
   错误类型: assertion

32. tests/unit/services/employee.test.ts
   测试套件: EmployeeService
   测试名称: approveVisitorApplication > should handle approval failure
   错误信息: AssertionError: expected [Function] to throw error including '审批操作失败' but got 'HTTP 400: [object Object]'
   错误类型: assertion

33. tests/unit/services/visitor.test.ts
   测试套件: VisitorService
   测试名称: submitApplication > should validate required fields
   错误信息: AssertionError: expected [Function] to throw error including '访客姓名不能为空' but got 'HTTP 400: [object Object]'
   错误类型: assertion

34. tests/unit/services/visitor.test.ts
   测试套件: VisitorService
   测试名称: refreshPasscode > should handle refresh failure
   错误信息: AssertionError: expected [Function] to throw error including '通行码刷新失败' but got 'HTTP 400: [object Object]'
   错误类型: assertion

------------------------------------------------------------
📄 完整测试日志: 2025-10-10-21608-test-execution.log
📄 详细错误日志: 2025-10-10-21608-test-errors.log
============================================================
