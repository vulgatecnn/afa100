# AFA åŠå…¬å°ç¨‹åºæ–‡æ¡£ä¸­å¿ƒ

## æ¦‚è¿°

æ¬¢è¿æ¥åˆ° AFA åŠå…¬å°ç¨‹åºé¡¹ç›®æ–‡æ¡£ä¸­å¿ƒã€‚æœ¬æ–‡æ¡£æä¾›äº†é¡¹ç›®å¼€å‘ã€éƒ¨ç½²å’Œç»´æŠ¤çš„å®Œæ•´æŒ‡å—ã€‚

## æ–‡æ¡£ç›®å½•

### ğŸš€ å¿«é€Ÿå¼€å§‹
- [ç¯å¢ƒè®¾ç½®æŒ‡å—](./environment-setup.md) - å¼€å‘ç¯å¢ƒé…ç½®å’Œä¾èµ–å®‰è£…
- [é¡¹ç›®ç»“æ„è¯´æ˜](./project-structure.md) - é¡¹ç›®ç»„ç»‡å’Œç›®å½•ç»“æ„
- [å¼€å‘å·¥ä½œæµç¨‹](./development-workflow.md) - æ—¥å¸¸å¼€å‘æµç¨‹å’Œè§„èŒƒ

### ğŸ“‹ TypeScript ç±»å‹ç³»ç»Ÿ
- [TypeScript ä½¿ç”¨è§„èŒƒ](./typescript-usage-standards.md) - ç±»å‹å®šä¹‰å’Œä½¿ç”¨è§„èŒƒ
- [TypeScript æœ€ä½³å®è·µ](./typescript-best-practices.md) - å¼€å‘æœ€ä½³å®è·µæŒ‡å—
- [TypeScript é”™è¯¯æ’æŸ¥æ‰‹å†Œ](./typescript-error-troubleshooting.md) - å¸¸è§é”™è¯¯è¯Šæ–­å’Œè§£å†³æ–¹æ¡ˆ
- [TypeScript CI/CD é›†æˆ](./typescript-ci-integration.md) - æŒç»­é›†æˆä¸­çš„ç±»å‹æ£€æŸ¥

### ğŸ§ª æµ‹è¯•å’Œè´¨é‡ä¿è¯
- [E2E ç¯å¢ƒè®¾ç½®](./e2e-environment-setup.md) - ç«¯åˆ°ç«¯æµ‹è¯•ç¯å¢ƒé…ç½®
- [CI/CD é›†æˆæµ‹è¯•](./ci-cd-integration-testing.md) - æŒç»­é›†æˆæµ‹è¯•é…ç½®

### ğŸ—ï¸ æ¶æ„å’Œè®¾è®¡
- [ç³»ç»Ÿæ¶æ„è®¾è®¡](./system-architecture.md) - æ•´ä½“ç³»ç»Ÿæ¶æ„è¯´æ˜
- [æ•°æ®åº“è®¾è®¡](./database-design.md) - æ•°æ®æ¨¡å‹å’Œå…³ç³»è®¾è®¡
- [API è®¾è®¡è§„èŒƒ](./api-design-standards.md) - RESTful API è®¾è®¡è§„èŒƒ

### ğŸ”§ å¼€å‘æŒ‡å—
- [åç«¯å¼€å‘æŒ‡å—](./backend-development.md) - Node.js + TypeScript åç«¯å¼€å‘
- [å‰ç«¯å¼€å‘æŒ‡å—](./frontend-development.md) - React + TypeScript å‰ç«¯å¼€å‘
- [å°ç¨‹åºå¼€å‘æŒ‡å—](./miniprogram-development.md) - å¾®ä¿¡å°ç¨‹åºå¼€å‘

### ğŸ“¦ éƒ¨ç½²å’Œè¿ç»´
- [éƒ¨ç½²æŒ‡å—](./deployment-guide.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æµç¨‹
- [ç›‘æ§å’Œæ—¥å¿—](./monitoring-logging.md) - ç³»ç»Ÿç›‘æ§å’Œæ—¥å¿—ç®¡ç†
- [æ€§èƒ½ä¼˜åŒ–](./performance-optimization.md) - æ€§èƒ½è°ƒä¼˜æŒ‡å—

### ğŸ”’ å®‰å…¨å’Œæƒé™
- [å®‰å…¨è§„èŒƒ](./security-standards.md) - å®‰å…¨å¼€å‘è§„èŒƒ
- [æƒé™ç®¡ç†](./permission-management.md) - ç”¨æˆ·æƒé™å’Œè®¿é—®æ§åˆ¶

## é¡¹ç›®æ¦‚è§ˆ

### æŠ€æœ¯æ ˆ
- **åç«¯**: Node.js + TypeScript + Express.js + MySQL
- **å‰ç«¯**: React 18+ + TypeScript + Ant Design + Vite
- **å°ç¨‹åº**: å¾®ä¿¡åŸç”Ÿå°ç¨‹åº
- **åŒ…ç®¡ç†**: pnpm
- **æµ‹è¯•**: Vitest + Playwright
- **CI/CD**: GitHub Actions

### æ ¸å¿ƒåŠŸèƒ½
- ç§ŸåŠ¡ç®¡ç†ç«¯ï¼šå•†æˆ·ç®¡ç†ã€ç©ºé—´ç®¡ç†ã€é€šè¡Œæƒé™æ§åˆ¶
- å•†æˆ·ç®¡ç†ç«¯ï¼šå‘˜å·¥ç®¡ç†ã€è®¿å®¢å®¡æ‰¹ã€æƒé™åˆ†é…
- è®¿å®¢å°ç¨‹åºï¼šè®¿å®¢é¢„çº¦ã€å‘˜å·¥ç”³è¯·ã€é€šè¡Œç å±•ç¤º
- é€šè¡ŒéªŒè¯ï¼šäºŒç»´ç /äººè„¸/åˆ·å¡å¤šç§é€šè¡Œæ–¹å¼

### é¡¹ç›®ç»“æ„
```
afa-office-system/
â”œâ”€â”€ backend/                    # åç«¯ API æœåŠ¡
â”œâ”€â”€ frontend/                   # å‰ç«¯ç®¡ç†åå°
â”‚   â”œâ”€â”€ tenant-admin/          # ç§ŸåŠ¡ç®¡ç†ç«¯
â”‚   â””â”€â”€ merchant-admin/        # å•†æˆ·ç®¡ç†ç«¯
â”œâ”€â”€ miniprogram/               # å¾®ä¿¡å°ç¨‹åº
â”œâ”€â”€ shared/                    # å…±äº«ä»£ç å’Œç±»å‹
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ scripts/                   # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
```

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼šController â†’ Service â†’ Model
- ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### Git å·¥ä½œæµ
- ä¸»åˆ†æ”¯ï¼š`main` (ç”Ÿäº§ç¯å¢ƒ)
- å¼€å‘åˆ†æ”¯ï¼š`develop` (å¼€å‘ç¯å¢ƒ)
- åŠŸèƒ½åˆ†æ”¯ï¼š`feature/åŠŸèƒ½åç§°`
- ä¿®å¤åˆ†æ”¯ï¼š`fix/é—®é¢˜æè¿°`

### æäº¤è§„èŒƒ
```
type(scope): description

ç±»å‹:
- feat: æ–°åŠŸèƒ½
- fix: ä¿®å¤é—®é¢˜
- docs: æ–‡æ¡£æ›´æ–°
- style: ä»£ç æ ¼å¼è°ƒæ•´
- refactor: ä»£ç é‡æ„
- test: æµ‹è¯•ç›¸å…³
- chore: æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£… Node.js 18+
# å®‰è£… pnpm
npm install -g pnpm

# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd afa-office-system

# å®‰è£…ä¾èµ–
pnpm install
```

### 2. å¼€å‘ç¯å¢ƒå¯åŠ¨
```bash
# å¯åŠ¨åç«¯æœåŠ¡ (ç«¯å£ 5100)
cd afa-office-system/backend
pnpm dev

# å¯åŠ¨å‰ç«¯æœåŠ¡ (ç«¯å£ 5000, 5050)
cd afa-office-system/frontend/tenant-admin
pnpm dev

cd afa-office-system/frontend/merchant-admin
pnpm dev
```

### 3. æ•°æ®åº“åˆå§‹åŒ–
```bash
cd afa-office-system/backend
pnpm db:init
```

### 4. è¿è¡Œæµ‹è¯•
```bash
# åç«¯æµ‹è¯•
cd afa-office-system/backend
pnpm test

# å‰ç«¯æµ‹è¯•
cd afa-office-system/frontend/tenant-admin
pnpm test
```

## TypeScript ç±»å‹ç³»ç»Ÿ

### ç±»å‹æ£€æŸ¥
```bash
# è¿è¡Œç±»å‹æ£€æŸ¥
pnpm type-check

# è¿è¡Œç±»å‹æ£€æŸ¥éªŒè¯
pnpm type-check:validate

# è¿è¡Œç±»å‹å›å½’æµ‹è¯•
pnpm type-check:regression
```

### ç±»å‹è´¨é‡ç›‘æ§
- ç±»å‹è¦†ç›–ç‡ç›®æ ‡ï¼š>95%
- `any` ç±»å‹ä½¿ç”¨ç‡ï¼š<1%
- ç±»å‹é”™è¯¯æ•°é‡ï¼š0 (ç›®æ ‡)
- CI/CD è‡ªåŠ¨ç±»å‹æ£€æŸ¥

## å¸¸ç”¨å‘½ä»¤

### å¼€å‘å‘½ä»¤
```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼
pnpm dev

# æ„å»ºé¡¹ç›®
pnpm build

# è¿è¡Œæµ‹è¯•
pnpm test

# ä»£ç æ£€æŸ¥
pnpm lint

# ä»£ç æ ¼å¼åŒ–
pnpm format
```

### æ•°æ®åº“å‘½ä»¤
```bash
# åˆå§‹åŒ–æ•°æ®åº“
pnpm db:init

# è¿è¡Œè¿ç§»
pnpm db:migrate

# é‡ç½®æ•°æ®åº“
pnpm db:reset
```

### æµ‹è¯•å‘½ä»¤
```bash
# å•å…ƒæµ‹è¯•
pnpm test

# é›†æˆæµ‹è¯•
pnpm test:integration

# E2E æµ‹è¯•
pnpm test:e2e

# æµ‹è¯•è¦†ç›–ç‡
pnpm test:coverage
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### ç«¯å£å†²çª
```bash
# ç»ˆæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
.\scripts\kill-dev.cmd

# æˆ–ä½¿ç”¨ PowerShell è„šæœ¬
.\scripts\kill-dev-ports.ps1 -All
```

#### ä¾èµ–é—®é¢˜
```bash
# æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

#### TypeScript é”™è¯¯
```bash
# è¿è¡Œç±»å‹æ£€æŸ¥è¯Šæ–­
pnpm type-check:validate

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æŠ¥å‘Š
cat type-check-report.json
```

### è·å–å¸®åŠ©
- æŸ¥çœ‹ç›¸å…³æ–‡æ¡£ç« èŠ‚
- æ£€æŸ¥ GitHub Issues
- è”ç³»é¡¹ç›®ç»´æŠ¤è€…
- å‚è€ƒ [TypeScript é”™è¯¯æ’æŸ¥æ‰‹å†Œ](./typescript-error-troubleshooting.md)

## è´¡çŒ®æŒ‡å—

### å‚ä¸å¼€å‘
1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç å˜æ›´
4. åˆ›å»º Pull Request
5. ä»£ç å®¡æŸ¥å’Œåˆå¹¶

### æ–‡æ¡£è´¡çŒ®
1. å‘ç°æ–‡æ¡£é—®é¢˜æˆ–æ”¹è¿›å»ºè®®
2. ç¼–è¾‘ç›¸åº”çš„ Markdown æ–‡ä»¶
3. æäº¤ Pull Request
4. æ–‡æ¡£å®¡æŸ¥å’Œæ›´æ–°

### é—®é¢˜åé¦ˆ
1. æœç´¢ç°æœ‰ Issues
2. åˆ›å»ºæ–°çš„ Issue
3. æä¾›è¯¦ç»†çš„é—®é¢˜æè¿°
4. åŒ…å«å¤ç°æ­¥éª¤å’Œç¯å¢ƒä¿¡æ¯

## ç‰ˆæœ¬å†å²

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- åŸºç¡€åŠŸèƒ½å®ç°
- TypeScript ç±»å‹ç³»ç»Ÿå»ºç«‹
- CI/CD æµæ°´çº¿é…ç½®
- æ–‡æ¡£ä½“ç³»å®Œå–„

### è®¡åˆ’æ›´æ–°
- æ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§
- æ›´å¤šæµ‹è¯•è¦†ç›–
- å›½é™…åŒ–æ”¯æŒ
- ç§»åŠ¨ç«¯é€‚é…

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](../LICENSE) æ–‡ä»¶ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…ï¼šAFA Team
- é‚®ç®±ï¼š[é¡¹ç›®é‚®ç®±]
- æ–‡æ¡£æ›´æ–°ï¼šå®šæœŸæ›´æ–°ï¼Œç‰ˆæœ¬åŒæ­¥

---

**æ³¨æ„**: æœ¬æ–‡æ¡£ä¼šéšç€é¡¹ç›®å‘å±•æŒç»­æ›´æ–°ã€‚å»ºè®®å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚