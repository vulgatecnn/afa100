# CI/CD å·¥å…·ä½¿ç”¨æŒ‡å—

æœ¬æŒ‡å—ä»‹ç»é¡¹ç›®ä¸­å¯ç”¨çš„ CI/CD æ£€æŸ¥å’Œç›‘æ§å·¥å…·ã€‚

---

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### 1. CI/CD é›†æˆæ£€æŸ¥ (ç»¼åˆæ£€æŸ¥)

**è„šæœ¬**: `scripts/ci-integration-check.js`

**ç”¨é€”**: å¯¹æ•´ä¸ª CI/CD é…ç½®è¿›è¡Œå…¨é¢æ£€æŸ¥ï¼ŒåŒ…æ‹¬ Git ä»“åº“ã€GitHub Actionsã€ä¾èµ–é…ç½®ã€é¡¹ç›®ç»“æ„ã€ç¯å¢ƒé…ç½®å’Œæœ€ä½³å®è·µã€‚

**è¿è¡Œå‘½ä»¤**:
```bash
node scripts/ci-integration-check.js
```

**æ£€æŸ¥å†…å®¹**:
- âœ… Git ä»“åº“çŠ¶æ€å’Œè¿œç¨‹é…ç½®
- âœ… GitHub Actions å·¥ä½œæµæ–‡ä»¶
- âœ… ä¾èµ–å’Œæµ‹è¯•è„šæœ¬é…ç½®
- âœ… é¡¹ç›®ç›®å½•ç»“æ„
- âœ… ç¯å¢ƒé…ç½®æ–‡ä»¶
- âœ… æœ€ä½³å®è·µéµå¾ªæƒ…å†µ

**è¾“å‡º**:
- æ§åˆ¶å°å½©è‰²è¾“å‡º
- ç”Ÿæˆ `ci-integration-check-report.md` æŠ¥å‘Š

**é€‚ç”¨åœºæ™¯**:
- é¡¹ç›®åˆå§‹åŒ–åçš„é¦–æ¬¡æ£€æŸ¥
- å®šæœŸå…¨é¢è¯„ä¼°ï¼ˆå»ºè®®æ¯å‘¨ä¸€æ¬¡ï¼‰
- é‡å¤§é…ç½®å˜æ›´åçš„éªŒè¯

---

### 2. CI/CD å¥åº·æ£€æŸ¥

**è„šæœ¬**: `scripts/ci-health-check.js`

**ç”¨é€”**: æ£€æŸ¥å·¥ä½œæµæ–‡ä»¶çš„å­˜åœ¨æ€§ã€é…ç½®è´¨é‡å’Œå¿…éœ€æ–‡ä»¶ã€‚

**è¿è¡Œå‘½ä»¤**:
```bash
node scripts/ci-health-check.js
```

**æ£€æŸ¥å†…å®¹**:
- âœ… å·¥ä½œæµæ–‡ä»¶æ•°é‡å’ŒåŸºæœ¬ä¿¡æ¯
- âœ… é…ç½®è´¨é‡ï¼ˆç¼“å­˜ã€è¶…æ—¶ã€é”™è¯¯å¤„ç†ç­‰ï¼‰
- âœ… å¿…éœ€æ–‡ä»¶æ£€æŸ¥
- âœ… æµ‹è¯•è„šæœ¬é…ç½®

**è¾“å‡º**:
- æ§åˆ¶å°å½©è‰²è¾“å‡º
- ç”Ÿæˆ `ci-health-check-report.md` æŠ¥å‘Š
- å¥åº·è¯„åˆ†ï¼ˆ0-100%ï¼‰

**é€‚ç”¨åœºæ™¯**:
- æ—¥å¸¸å¿«é€Ÿå¥åº·æ£€æŸ¥
- å·¥ä½œæµæ–‡ä»¶ä¿®æ”¹åçš„éªŒè¯
- CI/CD æ€§èƒ½ä¼˜åŒ–å‰çš„åŸºå‡†æµ‹è¯•

---

### 3. å·¥ä½œæµé…ç½®éªŒè¯

**è„šæœ¬**: `scripts/ci-workflow-validator.js`

**ç”¨é€”**: æ·±åº¦éªŒè¯å·¥ä½œæµé…ç½®çš„æ­£ç¡®æ€§ã€å®‰å…¨æ€§å’Œæœ€ä½³å®è·µã€‚

**è¿è¡Œå‘½ä»¤**:
```bash
node scripts/ci-workflow-validator.js
```

**æ£€æŸ¥å†…å®¹**:
- âœ… å¿…éœ€é…ç½®é¡¹ï¼ˆname, on, jobsï¼‰
- âœ… æ¨èé…ç½®ï¼ˆç¼“å­˜ã€è¶…æ—¶ã€artifactsï¼‰
- âœ… æœ€ä½³å®è·µï¼ˆç‰ˆæœ¬å›ºå®šã€é”™è¯¯å¤„ç†ã€å¹¶å‘æ§åˆ¶ï¼‰
- âœ… å®‰å…¨æ£€æŸ¥ï¼ˆç¡¬ç¼–ç å¯†é’¥ã€Secrets ä½¿ç”¨ï¼‰

**è¾“å‡º**:
- æ§åˆ¶å°è¯¦ç»†è¾“å‡ºï¼ˆé”™è¯¯ã€è­¦å‘Šã€å»ºè®®ï¼‰
- ç”Ÿæˆ `ci-workflow-validation-report.md` æŠ¥å‘Š
- å¥åº·è¯„åˆ†ï¼ˆ0-100%ï¼‰

**é€‚ç”¨åœºæ™¯**:
- åˆ›å»ºæˆ–ä¿®æ”¹å·¥ä½œæµæ–‡ä»¶å
- å®‰å…¨å®¡è®¡
- é…ç½®ä¼˜åŒ–

---

## ğŸ“Š ä½¿ç”¨å»ºè®®

### æ—¥å¸¸ä½¿ç”¨æµç¨‹

```bash
# 1. å¿«é€Ÿå¥åº·æ£€æŸ¥ï¼ˆæ¯å¤©ï¼‰
node scripts/ci-health-check.js

# 2. å·¥ä½œæµéªŒè¯ï¼ˆä¿®æ”¹å·¥ä½œæµåï¼‰
node scripts/ci-workflow-validator.js

# 3. ç»¼åˆæ£€æŸ¥ï¼ˆæ¯å‘¨ï¼‰
node scripts/ci-integration-check.js
```

### åœ¨ package.json ä¸­æ·»åŠ å¿«æ·å‘½ä»¤

```json
{
  "scripts": {
    "ci:check": "node scripts/ci-integration-check.js",
    "ci:health": "node scripts/ci-health-check.js",
    "ci:validate": "node scripts/ci-workflow-validator.js",
    "ci:check:all": "npm run ci:health && npm run ci:validate && npm run ci:check"
  }
}
```

ç„¶åå¯ä»¥ä½¿ç”¨ï¼š
```bash
pnpm ci:check
pnpm ci:health
pnpm ci:validate
pnpm ci:check:all  # è¿è¡Œæ‰€æœ‰æ£€æŸ¥
```

---

## ğŸ“ˆ æŠ¥å‘Šæ–‡ä»¶è¯´æ˜

| æŠ¥å‘Šæ–‡ä»¶ | ç”Ÿæˆå·¥å…· | å†…å®¹ |
|---------|---------|------|
| `ci-integration-check-report.md` | ci-integration-check.js | ç»¼åˆé›†æˆæ£€æŸ¥ç»“æœ |
| `ci-health-check-report.md` | ci-health-check.js | å¥åº·çŠ¶æ€è¯¦ç»†æŠ¥å‘Š |
| `ci-workflow-validation-report.md` | ci-workflow-validator.js | å·¥ä½œæµéªŒè¯è¯¦ç»†ç»“æœ |
| `CI-CD-INTEGRATION-SUMMARY.md` | æ‰‹åŠ¨æ±‡æ€» | æ€»ç»“æŠ¥å‘Šå’Œæ”¹è¿›å»ºè®® |

---

## ğŸ¯ å¸¸è§é—®é¢˜è§£å†³

### Q1: æ£€æŸ¥è„šæœ¬æŠ¥é”™æ€ä¹ˆåŠï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
2. ç¡®ä¿ Node.js ç‰ˆæœ¬ >= 18.0.0
3. ç¡®ä¿å·²å®‰è£…ä¾èµ–ï¼š`pnpm install`
4. æ£€æŸ¥æ–‡ä»¶æƒé™

### Q2: å¦‚ä½•ä¿®å¤"ç¡¬ç¼–ç å¯†é’¥"é”™è¯¯ï¼Ÿ

**A**: 
1. åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ  Secrets
2. å°†å·¥ä½œæµä¸­çš„ç¡¬ç¼–ç å€¼æ›¿æ¢ä¸º `${{ secrets.SECRET_NAME }}`
3. å‚è€ƒ `CI-CD-INTEGRATION-SUMMARY.md` ä¸­çš„å¿«é€Ÿä¿®å¤æŒ‡å—

### Q3: å¥åº·è¯„åˆ†ä½æ€ä¹ˆåŠï¼Ÿ

**A**:
1. æŸ¥çœ‹ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶ï¼Œäº†è§£å…·ä½“é—®é¢˜
2. æŒ‰ä¼˜å…ˆçº§ä¿®å¤é—®é¢˜ï¼ˆé”™è¯¯ > è­¦å‘Š > å»ºè®®ï¼‰
3. ä¿®å¤åé‡æ–°è¿è¡Œæ£€æŸ¥éªŒè¯

### Q4: å¦‚ä½•æ·»åŠ æ–°çš„éªŒè¯è§„åˆ™ï¼Ÿ

**A**:
ç¼–è¾‘ `scripts/ci-workflow-validator.js`ï¼Œåœ¨ `validationRules` å¯¹è±¡ä¸­æ·»åŠ æ–°è§„åˆ™ï¼š

```javascript
{
  name: 'my-custom-rule',
  check: (content) => {
    // è¿”å› true è¡¨ç¤ºé€šè¿‡ï¼Œfalse è¡¨ç¤ºå¤±è´¥
    return content.includes('my-pattern');
  },
  message: 'è§„åˆ™æè¿°',
  severity: 'error' | 'warning' | 'info',
}
```

---

## ğŸ”„ CI/CD å·¥ä½œæµ

### æ¨èçš„æ£€æŸ¥é¢‘ç‡

| æ£€æŸ¥ç±»å‹ | é¢‘ç‡ | æ—¶æœº |
|---------|------|------|
| å¥åº·æ£€æŸ¥ | æ¯å¤© | å¼€å§‹å·¥ä½œå‰ |
| å·¥ä½œæµéªŒè¯ | æŒ‰éœ€ | ä¿®æ”¹å·¥ä½œæµå |
| ç»¼åˆæ£€æŸ¥ | æ¯å‘¨ | å‘¨ä¸€æˆ–å‘¨äº” |
| å®Œæ•´å®¡è®¡ | æ¯æœˆ | æœˆåˆæˆ–æœˆæœ« |

### é›†æˆåˆ° Git Hooks

å¯ä»¥å°†æ£€æŸ¥é›†æˆåˆ° Git hooks ä¸­ï¼š

**`.husky/pre-commit`**:
```bash
#!/bin/sh
# åœ¨æäº¤å‰è¿è¡Œå¥åº·æ£€æŸ¥
node scripts/ci-health-check.js
```

**`.husky/pre-push`**:
```bash
#!/bin/sh
# åœ¨æ¨é€å‰è¿è¡Œå·¥ä½œæµéªŒè¯
node scripts/ci-workflow-validator.js
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [CI/CD çŠ¶æ€å¾½ç« é…ç½®](./CI-CD-BADGES.md)
- [CI/CD é›†æˆæ£€æŸ¥æ€»ç»“](../CI-CD-INTEGRATION-SUMMARY.md)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)

---

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶è·å–è¯¦ç»†ä¿¡æ¯
2. å‚è€ƒ `CI-CD-INTEGRATION-SUMMARY.md` ä¸­çš„å¿«é€Ÿä¿®å¤æŒ‡å—
3. æŸ¥é˜… GitHub Actions å®˜æ–¹æ–‡æ¡£
4. åœ¨é¡¹ç›®ä¸­åˆ›å»º Issue

---

**æœ€åæ›´æ–°**: 2025-10-15  
**å·¥å…·ç‰ˆæœ¬**: 1.0.0
